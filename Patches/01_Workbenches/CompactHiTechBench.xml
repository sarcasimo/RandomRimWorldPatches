<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <!-- Add compact hi-tech research bench using VEF Recipe Inheritance -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs</xpath>
    <value>
      <ThingDef ParentName="BenchBase">
        <defName>ResearchBenchHiTechCompact</defName>
        <label>compact hi-tech research bench</label>
        <description>A space-efficient hi-tech research bench. Smaller footprint but higher material cost and reduced research speed. Compatible with all research facility enhancements and inherits all research capabilities from the standard hi-tech bench.</description>
        <thingClass>Building_ResearchBench</thingClass>
        <size>(3,1)</size>
        <costList>
          <Steel>200</Steel>
          <ComponentIndustrial>8</ComponentIndustrial>
          <Plasteel>40</Plasteel>
          <ComponentSpacer>2</ComponentSpacer>
        </costList>
        <graphicData>
          <texPath>Things/Building/Production/ResearchBenchHiTech</texPath>
          <graphicClass>Graphic_Multi</graphicClass>
          <shaderType>CutoutComplex</shaderType>
          <drawSize>(3.5,1.5)</drawSize>
          <color>(0.7, 0.85, 1.0)</color>
        </graphicData>
        <statBases>
          <MaxHitPoints>180</MaxHitPoints>
          <WorkToBuild>20000</WorkToBuild>
          <Flammability>1.0</Flammability>
          <ResearchSpeedFactor>0.85</ResearchSpeedFactor>
          <Mass>35</Mass>
        </statBases>
        <comps>
          <li Class="CompProperties_Power">
            <compClass>CompPowerTrader</compClass>
            <basePowerConsumption>300</basePowerConsumption>
            <shortCircuitInRain>true</shortCircuitInRain>
          </li>
          <li Class="CompProperties_Flickable"/>
          <li Class="CompProperties_AffectedByFacilities">
            <linkableFacilities>
              <li>ToolCabinet</li>
              <li>MultiAnalyzer</li>
            </linkableFacilities>
          </li>
        </comps>
        <hasInteractionCell>true</hasInteractionCell>
        <interactionCellOffset>(0,0,-1)</interactionCellOffset>
        <placeWorkers>
          <li>PlaceWorker_ShowFacilitiesConnections</li>
          <li>PlaceWorker_ReportWorkSpeedPenalties</li>
        </placeWorkers>
        <constructionSkillPrerequisite>8</constructionSkillPrerequisite>
        <minifiedDef>MinifiedThing</minifiedDef>
        <building>
          <buildingTags>
            <li>Production</li>
            <li>Research</li>
          </buildingTags>
        </building>
        <designationCategory>Production</designationCategory>
        <designationHotKey>Misc4</designationHotKey>
        <researchPrerequisites>
          <li>Microelectronics</li>
        </researchPrerequisites>
        
        <!-- VEF Recipe Inheritance: Inherit all research from hi-tech bench (1.6 namespace) -->
        <modExtensions>
          <li Class="VEF.Buildings.RecipeInheritanceExtension">
            <inheritRecipesFrom>
              <li>HiTechResearchBench</li>
            </inheritRecipesFrom>
          </li>
        </modExtensions>
      </ThingDef>
    </value>
  </Operation>

  <!-- Add our compact bench to the Research WorkGiver -->
  <Operation Class="PatchOperationAdd">
    <xpath>/Defs/WorkGiverDef[defName="DoBillsResearchBench"]/fixedBillGiverDefs</xpath>
    <value>
      <li>ResearchBenchHiTechCompact</li>
    </value>
  </Operation>
</Patch>